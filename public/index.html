<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <title>D'Avilla Chat</title>
    <link rel="icon" href="assets/IconeDoMeuSite.png" type="image/png" />
    <link rel="stylesheet" href="styles/style.css" />
  </head>

  <body id="pageBody">
    <div class="container">
      <div class="header-controls">
        <h1>ğŸ’¬ D'Avilla Chat</h1>
        <button id="darkModeToggle">ğŸŒ™ Modo Escuro</button>
        <button id="logoutButton" class="hidden danger-button">ğŸšª Sair</button>
      </div>

      <div id="errorDisplay" class="error-display" aria-live="assertive"></div>

      <div id="joinScreen">
        <div class="input-group">
          <label for="username">Nome de UsuÃ¡rio:</label>
          <input
            id="username"
            placeholder="Digite seu nome"
            maxlength="25"
            aria-label="Seu nome"
          />
        </div>
        <div class="input-group">
          <label for="avatarStyleSelect">Estilo do Avatar:</label>
          <select id="avatarStyleSelect">
            <option value="thumbs" selected>Legal ğŸ‘</option>
            <option value="adventurer">Aventureiro ğŸ¹</option>
            <option value="pixel-art">Pixel Art ğŸ‘¾</option>
            <option value="bottts">RobÃ´s ğŸ¤–</option>
            <option value="micah">Pessoas ğŸ˜Š</option>
            <option value="miniavs">Minimalista ğŸ‘¤</option>
            <option value="open-peeps">Descolados ğŸ˜</option>
            <option value="notionists">Notion âœï¸</option>
            <option value="rings">AnÃ©is Abstratos ğŸ’</option>
            <option value="shapes">Formas GeomÃ©tricas ğŸ’ </option>
          </select>
        </div>
        <div class="input-group">
          <label for="avatarSeed">Personalizar Avatar (opcional):</label>
          <input
            id="avatarSeed"
            placeholder="Ex: seuApelido"
            maxlength="50"
            aria-label="Personalizar semente do avatar"
          />
        </div>
        <div id="avatarPreviewContainer">
          <p>PrÃ©via do Avatar:</p>
          <img
            id="avatarPreview"
            src=""
            alt="PrÃ©via do avatar"
            width="48"
            height="48"
          />
        </div>
        <button id="joinButton">Entrar no Chat</button>
      </div>

      <div class="chat-ui hidden">
        <!-- Inicialmente escondido -->
        <div class="chat-wrapper">
          <div id="chatContainer">
            <div id="chat" aria-live="polite">
              <!-- Mensagens serÃ£o inseridas aqui -->
            </div>
            <button id="newMessagesIndicator" class="hidden">
              â¬‡ï¸ Novas Mensagens
            </button>
          </div>
          <div id="users">
            <h3>Online</h3>
            <ul id="userList"></ul>
          </div>
        </div>
        <div id="typingIndicator" class="typing-indicator"></div>

        <!-- Ãrea de Resposta -->
        <div id="replyingToContainer" class="replying-to-container hidden">
          <div class="replying-to-header">
            <span>Respondendo a:</span>
            <button id="cancelReplyButton" title="Cancelar Resposta">Ã—</button>
          </div>
          <div id="replyingToPreview" class="replying-to-preview">
            <!-- ConteÃºdo da mensagem original aqui -->
          </div>
        </div>

        <div class="input-wrapper" id="messageInputWrapper">
          <div id="emojiPickerContainer" class="hidden">
            <emoji-picker></emoji-picker>
          </div>
          <button id="emojiToggleButton" title="Inserir Emoji">ğŸ˜€</button>
          <input
            id="msg"
            type="text"
            placeholder="Digite sua mensagem, /pm <user> <msg> ou /clear"
            disabled
            maxlength="500"
            aria-label="Sua mensagem"
          />
          <button id="send" disabled>Enviar</button>
        </div>
        <div
          id="messageErrorDisplay"
          class="error-display"
          aria-live="assertive"
        ></div>
      </div>
      <!-- Fim de .chat-ui -->
    </div>

    <button id="toggleUpdates" title="Ver AtualizaÃ§Ãµes">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="20"
        height="20"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path
          d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"
        ></path>
        <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
      </svg>
    </button>

    <div id="updatesPanel">
      <h2>ğŸ› ï¸ AtualizaÃ§Ãµes do Chat</h2>
      <ul>
        <li>âœ… Interface redesenhada e centralizada</li>
        <li>ğŸŒ™ Suporte a modo escuro</li>
        <li>ğŸ‘¥ Painel de usuÃ¡rios online com cores</li>
        <li>ğŸ¨ Avatares dinÃ¢micos para usuÃ¡rios (com escolha de estilo!)</li>
        <li>ğŸšª BotÃ£o de Sair adicionado!</li>
        <li>ğŸ›¡ï¸ Melhorias de seguranÃ§a (XSS)</li>
        <li>âš™ï¸ ValidaÃ§Ãµes de entrada (nome, mensagem)</li>
        <li>ğŸ•’ Timestamps nas mensagens</li>
        <li>ğŸ”— Caminhos de arquivos corrigidos</li>
        <li>ğŸ’… Estilos centralizados em CSS (mais simples!)</li>
        <li>ğŸ’¬ Indicador de "Digitando..." (global e na lista de usuÃ¡rios)</li>
        <li>ğŸ“œ Scroll Inteligente no Chat e botÃ£o "Novas Mensagens"</li>
        <li>âœ¨ AnimaÃ§Ãµes Sutis (reduzidas)</li>
        <li>ğŸ–Œï¸ Barra de Rolagem Estilizada</li>
        <li>ğŸ“± Melhorias na Responsividade</li>
        <li>ğŸ¤« Mensagens Privadas (Sussurros) - com comando `/pm` ou `/w`</li>
        <li>ğŸ”— URLs nas mensagens agora sÃ£o clicÃ¡veis</li>
        <li>ğŸ“ Suporte bÃ¡sico a Markdown: *itÃ¡lico*, *negrito*, ~tachado~</li>
        <li>ğŸ§¹ Comando `/clear` para limpar chat local (com confirmaÃ§Ã£o)</li>
        <li>ğŸ”” NotificaÃ§Ãµes no tÃ­tulo da aba</li>
        <li>ğŸš¦ Rate limiting bÃ¡sico no servidor</li>
        <li>âš ï¸ Alertas substituÃ­dos por mensagens inline</li>
        <li>â³ Feedback de "Conectando..." ao entrar</li>
        <li>ğŸ“œ Esta aba de atualizaÃ§Ãµes foi adicionada!</li>
        <li>ğŸ“œ HistÃ³rico das Ãºltimas mensagens ao entrar no chat!</li>
        <li>âœ¨ Seletor de Emojis! ğŸ˜€</li>
        <li>ğŸ“ EdiÃ§Ã£o de mensagens (com limite de tempo).</li>
        <li>ğŸ—‘ï¸ ExclusÃ£o de mensagens (prÃ³prias).</li>
        <li>â†©ï¸ Responder a mensagens especÃ­ficas.</li>
        <li>
          ğŸ“œ Nota: Eu tive bastante dificuldade para fazer isso, mas com toda
          certeza valeu a pena...
        </li>
        <li>
          ğŸ‘¥ Meu GitHub =
          <a href="https://github.com/WuallanDAvilla" target="_blank"
            >WuallanDAvilla</a
          >
        </li>
        <li>âœ… Projeto pessoal finalizado!</li>
        <li>Â© Direitos Autorais reservados a Wuallan D'Avilla</li>
      </ul>
    </div>

    <!-- Template para os botÃµes de aÃ§Ã£o da mensagem -->
    <template id="messageActionsTemplate">
      <div class="message-actions">
        <button class="action-reply" title="Responder">â†©ï¸</button>
        <button class="action-edit" title="Editar">âœï¸</button>
        <button class="action-delete" title="Excluir">ğŸ—‘ï¸</button>
      </div>
    </template>

    <script
      type="module"
      src="https://cdn.jsdelivr.net/npm/emoji-picker-element@^1/index.js"
    ></script>
    <script src="script.js"></script>
  </body>
</html>
